[loggers]
keys=root,audit,chapi,amsoil
[handlers]
keys=syslogHandler,fileHandler
[formatters]
keys=syslogFormatter,fileFormatter

[logger_root]
level=%(loglevel)s
handlers=fileHandler
[logger_audit]
level=INFO
handlers=syslogHandler
# qualname is the string you pass to logging.getLogger
# Strange that some docs don't mention it
qualname=chapi.audit
# Channel is the last . separated bit of the qualname
channel="audit"
[logger_chapi]
level=%(loglevel)s
handlers=fileHandler
qualname=chapi
[logger_amsoil]
level=%(loglevel)s
handlers=fileHandler
qualname=amsoil

[handler_fileHandler]
class=logging.handlers.RotatingFileHandler
# DEBUG?
# level=INFO 
formatter=fileFormatter
filename="%(logfilename)s-conf"
# Maybe maxbyes should be 1.5M?
maxBytes=10485760
#FIXME: To rotate maybe the dir must be group writable?
#maxBytes=1048
backupCount=10
#args=("%(logfilename)s", "a", maxBytes=10485760, backupCount=10)
args=("%(logfilename)s",)

[handler_syslogHandler]
class=logging.handlers.SysLogHandler
level=INFO
formatter=syslogFormatter
address="/dev/log"
args=("/dev/log",)

# What about source IP? username from cert URN? method? module in prefix?

[formatter_syslogFormatter]
# The .250 means at most 250 characters in the message part
format=%(levelname)-8s:%(name)s:%(message).250s
datefmt=%m/%d/%Y %H:%M:%S

[formatter_fileFormatter]
format=%(asctime)s:%(levelname)-8s:%(name)s:%(message)s
datefmt=%m/%d/%Y %H:%M:%S
